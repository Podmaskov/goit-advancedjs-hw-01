{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\nconst THROTTLE_TIME = 500;\nconst LS_KEY = 'feedback-form-state';\nconst feedbackForm = document.querySelector('.feedback-form');\n\n(function preFillForm() {\n  const localStorageData =\n    localStorage.getItem(LS_KEY) && JSON.parse(localStorage.getItem(LS_KEY));\n\n  if (!localStorageData) return;\n\n  const inputEmail = feedbackForm.querySelector('input');\n  const textareaMessage = feedbackForm.querySelector('textarea');\n  inputEmail.value = localStorageData.email;\n  textareaMessage.value = localStorageData.message;\n})();\n\nfunction setDataToLocalStorage({ target }) {\n  const localStorageData =\n    localStorage.getItem(LS_KEY) && JSON.parse(localStorage.getItem(LS_KEY));\n\n  if (localStorageData) {\n    const formData = JSON.stringify({\n      ...localStorageData,\n      [target.name]: target.value,\n    });\n\n    localStorage.setItem(LS_KEY, formData);\n  } else {\n    localStorage.setItem(\n      LS_KEY,\n      JSON.stringify({ [target.name]: target.value })\n    );\n  }\n}\n\nfunction onSubmit(event) {\n  event.preventDefault();\n  feedbackForm.reset();\n  console.log(JSON.parse(localStorage.getItem(LS_KEY)));\n  localStorage.removeItem(LS_KEY);\n}\n\nfeedbackForm.addEventListener(\n  'input',\n  throttle(setDataToLocalStorage, THROTTLE_TIME)\n);\n\nfeedbackForm.addEventListener('submit', onSubmit);\n"],"names":["THROTTLE_TIME","LS_KEY","feedbackForm","localStorageData","inputEmail","textareaMessage","setDataToLocalStorage","target","formData","onSubmit","event","throttle"],"mappings":"wIACA,MAAMA,EAAgB,IAChBC,EAAS,sBACTC,EAAe,SAAS,cAAc,gBAAgB,GAE3D,UAAuB,CACtB,MAAMC,EACJ,aAAa,QAAQF,CAAM,GAAK,KAAK,MAAM,aAAa,QAAQA,CAAM,CAAC,EAEzE,GAAI,CAACE,EAAkB,OAEvB,MAAMC,EAAaF,EAAa,cAAc,OAAO,EAC/CG,EAAkBH,EAAa,cAAc,UAAU,EAC7DE,EAAW,MAAQD,EAAiB,MACpCE,EAAgB,MAAQF,EAAiB,OAC3C,KAEA,SAASG,EAAsB,CAAE,OAAAC,GAAU,CACzC,MAAMJ,EACJ,aAAa,QAAQF,CAAM,GAAK,KAAK,MAAM,aAAa,QAAQA,CAAM,CAAC,EAEzE,GAAIE,EAAkB,CACpB,MAAMK,EAAW,KAAK,UAAU,CAC9B,GAAGL,EACH,CAACI,EAAO,MAAOA,EAAO,KAC5B,CAAK,EAED,aAAa,QAAQN,EAAQO,CAAQ,CACzC,MACI,aAAa,QACXP,EACA,KAAK,UAAU,CAAE,CAACM,EAAO,MAAOA,EAAO,MAAO,CACpD,CAEA,CAEA,SAASE,EAASC,EAAO,CACvBA,EAAM,eAAc,EACpBR,EAAa,MAAK,EAClB,QAAQ,IAAI,KAAK,MAAM,aAAa,QAAQD,CAAM,CAAC,CAAC,EACpD,aAAa,WAAWA,CAAM,CAChC,CAEAC,EAAa,iBACX,QACAS,EAASL,EAAuBN,CAAa,CAC/C,EAEAE,EAAa,iBAAiB,SAAUO,CAAQ"}